{% extends "layout.html" %}
{% block content %}
    <table id="tickets" class="table table-striped table-bordered table-hover" >
        <thead>
            <tr>
                <th>Name</th>
                <th>Author</th>
                <th>Created at</th>
                <th>State</th>
            </tr>
        </thead>
        <tbody>
        {% for ticket in tickets.items %}
            <tr>
                <td><a href="{{ url_for('tickets.ticket_detail', ticket_id=ticket.id) }}">{{ ticket.title }}</a></td>
                <td>{{ ticket.author.user.name }}  {{ ticket.author.user.surname }}</td>
                <td>{{ ticket.created_at.strftime("%m/%d/%Y %H:%M:%S") }}</td>
                <td>{{ ticket.current_state }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% for page_num in tickets.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
      {% if page_num %}
        {% if tickets.page == page_num %}
          <a class="btn btn-info mb-4">{{page_num}}</a>
        {% else %}
          <a class="btn btn-outline-info mb-4" href="{{ url_for('tickets.tickets_list', page=page_num)}}">{{page_num}}</a>
        {% endif %}
      {% else %}
        <span class="align-top">...</span>
        {% endif %}
    {% endfor %}
    
{% endblock content %}